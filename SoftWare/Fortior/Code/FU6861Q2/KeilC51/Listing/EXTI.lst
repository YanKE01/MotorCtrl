C51 COMPILER V9.52.0.0   EXTI                                                              04/01/2023 22:13:44 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE EXTI
OBJECT MODULE PLACED IN .\Output\EXTI.obj
COMPILER INVOKED BY: D:\IDE\keil\C51\BIN\C51.EXE ..\User\Source\Hardware\EXTI.c LARGE OMF2 WARNINGLEVEL(0) BROWSE INCDIR
                    -(..\User\Include;..\FU68xx_Hardware_Driver\Include) DEBUG PRINT(.\Listing\EXTI.lst) TABS(2) OBJECT(.\Output\EXTI.obj)

line level    source

   1          /**
   2           * @copyright (C) COPYRIGHT 2022 Fortiortech Shenzhen
   3           * @file      EXTIInit.c
   4           * @author    Fortiortech  Appliction Team
   5           * @since     Create:2021-05-14
   6           * @date      Last modify:2022-07-14
   7           * @brief     This file contains EXTI init function used for Motor Control.
   8           */ 
   9          #include <FU68xx_2.h>
  10          #include <Myproject.h>
  11          
  12          /**
  13           * @brief      å¤–éƒ¨ä¸­æ–­é…ç½®
  14           */
  15          void EXTI_Init(void)
  16          {
  17   1          /* -----EXTI Input Pin é…ç½®----- */
  18   1          ClrBit(P0_OE, P00);                     // config P00 as inputï¼Œé…ç½®P0.0ä¸ºç¡¬ä»¶è¿‡æµFOç«¯å£
  19   1          ClrBit(P0_PU, P00);                     // 0:disable pull up, 1:enable P10 pull up
  20   1          /*  -------------------------------------------------------------------------------------------------
  21   1              1ã€å¤–éƒ¨ä¸­æ–­æ¨¡å¼é…ç½®
  22   1              2ã€IT01/IT00 = 00: ä¸Šå‡æ²¿äº§ç”Ÿä¸­æ–­
  23   1              3ã€IT01/IT00 = 01: ä¸‹é™æ²¿äº§ç”Ÿä¸­æ–­
  24   1              4ã€IT01/IT00 = 1x: ä¸Šå‡/ä¸‹é™æ²¿äº§ç”Ÿä¸­æ–­
  25   1              -------------------------------------------------------------------------------------------------*
             -/
  26   1          IF0  = 0;                               // clear P00 interrupt flag
  27   1          IT01 = 0;
  28   1          IT00 = 1;                               // 00: rising edge interruptï¼Œ01: failing edge interruptï¼Œ1x
             -: edge-change mode interrupt
  29   1          /*  -------------------------------------------------------------------------------------------------
  30   1              1ã€å¤–éƒ¨ä¸­æ–­ä¼˜å…ˆçº§é…ç½®åŠèŠ¯ç‰‡ä¸­æ–­æ€»ä½¿èƒ½
  31   1              2ã€PX01/PX00ï¼Œä¸­æ–­ä¼˜å…ˆçº§æ§åˆ¶å€¼ä»0-3ä¾æ¬¡è¡¨ç¤ºä¼˜å…ˆçº§ä»æœ€ä½åˆ°æœ€é«˜ï¼Œå…±4çº§ä¼˜
             -åŒ–çº§æ§åˆ¶
  32   1              3ã€EX0ï¼Œå¤–éƒ¨ä¸­æ–­0ä½¿èƒ½
  33   1              4ã€EA,èŠ¯ç‰‡ä¸­æ–­æ€»ä½¿èƒ½
  34   1              5ã€å¤–éƒ¨ä¸­æ–­æ˜¯å¦æœ‰æ»¤æ³¢çš„é…ç½®ï¼Œå†³å®šäºé€‰æ‹©ç¡¬ä»¶ä¿æŠ¤è§¦å‘ä¿¡å·æºï¼Œå¤–éƒ¨ä¸­æ
             -–­0æˆ–è€…æ¯”è¾ƒå™¨3ä¸­æ–­
  35   1              6ã€è‹¥é€‰æ‹©äº†æ¯”è¾ƒå™¨3ä¸­æ–­ï¼Œåˆ™å¤–éƒ¨ä¸­æ–­æ— æ³•è¿›è¡Œæ»¤æ³¢é…ç½®
  36   1              -------------------------------------------------------------------------------------------------*
             -/
  37   1          PX01 = 1;
  38   1          PX00 = 1;                               // ä¸­æ–­ä¼˜å…ˆçº§åˆ«3ï¼Œä¸­æ–­ä¼˜å…ˆçº§æœ€é«˜,
  39   1          EX0 = 1;                                // ä½¿èƒ½å¤–éƒ¨ä¸­æ–­0, POOä½å¤–éƒ¨ä¸­æ–­è¾“å…¥ç¡¬ä»¶
  40   1          EA = 1;                                 // ä½¿èƒ½å…¨å±€ä¸­æ–­
  41   1      }
  42          
  43          
  44          /**
  45           * @brief      ç¡çœ æ¨¡å¼åˆå§‹åŒ–
  46           */
  47          void Sleepmode_Init(void)
  48          {
  49   1          ClrBit(P1_OE, P11);                     // config   P11 as input
C51 COMPILER V9.52.0.0   EXTI                                                              04/01/2023 22:13:44 PAGE 2   

  50   1          ClrBit(P1_PU, P11);                     // diasable P11 Pull Up
  51   1          // ClrBit(P1_AN, P11);                  // diasable P11 analog function
  52   1          ClrBit(P1_IF, P11);                     // clear        P11 interrupt flag
  53   1          ClrBit(P1_IE, P11);                     // config   P11 as the source of EXTI1
  54   1          IT11 = 1;
  55   1          IT10 = 0;                               // 00: posedge mode interruptï¼Œ01: negedge mode interruptï¼Œ1
             -x: edge-change mode interrupt
  56   1          PX11 = 0;
  57   1          PX10 = 0;                               // ä¸­æ–­ä¼˜å…ˆçº§åˆ«0ï¼Œä¸­æ–­ä¼˜å…ˆçº§æœ€é«˜
  58   1          EX1 = 1;                                // ä½¿èƒ½å¤–éƒ¨ä¸­æ–­1, P11ä½å¤–éƒ¨ä¸­æ–­è¾“å…¥ç¡¬ä»¶
  59   1          EA = 1;                                 // ä½¿èƒ½å…¨å±€ä¸­æ–­
  60   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     54    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
